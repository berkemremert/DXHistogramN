<Window x:Class="DXHistogram.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/charts"
        Title="DevExpress Histogram Example (MVVM)" Height="700" Width="1200">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Input Panel -->
        <Border Grid.Column="0" Background="LightGray" Margin="5" CornerRadius="5">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10">
                    <TextBlock Text="Data Input Panel" 
                               FontSize="16" 
                               FontWeight="Bold" 
                               Margin="0,0,0,10"
                               HorizontalAlignment="Center"/>

                    <!-- Histogram Configuration -->
                    <GroupBox Header="Histogram Configuration" Margin="0,0,0,15">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Bin Count -->
                            <Label Content="Bins:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Margin="5,2" 
                                     Text="{Binding BinCount, UpdateSourceTrigger=PropertyChanged}" 
                                     VerticalAlignment="Center" Width="80" HorizontalAlignment="Left"
                                     ToolTip="Number of histogram bins (1-100)"/>

                            <!-- Min Value -->
                            <Label Content="Min:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Margin="5,2" 
                                     Text="{Binding MinValue, UpdateSourceTrigger=PropertyChanged}"
                                     VerticalAlignment="Center" Width="120" HorizontalAlignment="Left"
                                     ToolTip="Minimum value for histogram range (leave empty for data minimum)"/>

                            <!-- Max Value -->
                            <Label Content="Max:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Margin="5,2" 
                                     Text="{Binding MaxValue, UpdateSourceTrigger=PropertyChanged}"
                                     VerticalAlignment="Center" Width="120" HorizontalAlignment="Left"
                                     ToolTip="Maximum value for histogram range (leave empty for data maximum)"/>

                            <!-- Buttons -->
                            <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" 
                                        Orientation="Horizontal" Margin="0,10,0,0">
                                <Button Content="Apply Range" 
                                        Command="{Binding ApplyRangeCommand}"
                                        Margin="0,0,5,0" Padding="8,4"
                                        ToolTip="Apply custom histogram range and bin count"/>
                                <Button Content="Reset to Data Range" 
                                        Command="{Binding ResetRangeCommand}"
                                        Padding="8,4"
                                        ToolTip="Reset to use full data range"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>

                    <!-- Data Input -->
                    <GroupBox Header="Data Input" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="Enter values (comma or space separated):" 
                                       Margin="0,5,0,5" 
                                       TextWrapping="Wrap"/>
                            <TextBox Text="{Binding DataInput, UpdateSourceTrigger=PropertyChanged}"
                                     Height="80" 
                                     TextWrapping="Wrap" 
                                     AcceptsReturn="True"
                                     VerticalScrollBarVisibility="Auto"
                                     Margin="0,0,0,10"/>
                            <Button Content="Load Data" 
                                    Command="{Binding LoadDataCommand}"
                                    Margin="0,0,0,5"/>
                            <Button Content="Clear Data" 
                                    Command="{Binding ClearDataCommand}"
                                    Margin="0,0,0,5"/>
                            <Button Content="Load from File" 
                                    Command="{Binding LoadFromFileCommand}"
                                    Margin="0,0,0,5"/>
                            <Button Content="Save Data to File" 
                                    Command="{Binding SaveDataCommand}"
                                    Background="LightBlue"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Chart Design & Layout -->
                    <GroupBox Header="Chart Design Layout" Margin="0,0,0,15">
                        <StackPanel>
                            <Button Content="Open Chart Designer" 
                                    Command="{Binding OpenDesignerCommand}"
                                    Margin="0,0,0,10"
                                    FontWeight="Bold"/>
                            <Separator Margin="0,5"/>
                            <Button Content="Save Chart Layout" 
                                    Command="{Binding SaveLayoutCommand}"
                                    Margin="0,5,0,5"/>
                            <Button Content="Load Chart Layout" 
                                    Command="{Binding LoadLayoutCommand}"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Data Statistics -->
                    <GroupBox Header="Data Statistics">
                        <StackPanel>
                            <TextBlock Text="{Binding Statistics.Count, StringFormat='Count: {0}'}" Margin="0,2"/>
                            <TextBlock Text="{Binding Statistics.Mean, StringFormat='Mean: {0:F2}'}" Margin="0,2"/>
                            <TextBlock Text="{Binding Statistics.StandardDeviation, StringFormat='Std Dev: {0:F2}'}" Margin="0,2"/>
                            <TextBlock Text="{Binding Statistics.Minimum, StringFormat='Min: {0:F2}'}" Margin="0,2"/>
                            <TextBlock Text="{Binding Statistics.Maximum, StringFormat='Max: {0:F2}'}" Margin="0,2"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- Status Bar -->
                    <GroupBox Header="Status" Margin="0,10,0,0">
                        <TextBlock Text="{Binding StatusMessage}" 
                                   TextWrapping="Wrap" 
                                   Margin="5"
                                   Foreground="DarkBlue"/>
                    </GroupBox>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Chart Area -->
        <Grid Grid.Column="1" Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock Grid.Row="0" 
                       Text="Data Distribution Histogram (MVVM Pattern)" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       Margin="10" 
                       HorizontalAlignment="Center"/>

            <!-- Chart Container -->
            <dxc:ChartControl x:Name="chartControl" Grid.Row="1" Margin="10">
                <dxc:ChartControl.Titles>
                    <dxc:Title HorizontalAlignment="Center" 
                               Content="Frequency Distribution"/>
                </dxc:ChartControl.Titles>

                <dxc:XYDiagram2D>
                    <dxc:XYDiagram2D.AxisX>
                        <dxc:AxisX2D>
                            <dxc:AxisX2D.Title>
                                <dxc:AxisTitle Content="Value Ranges"/>
                            </dxc:AxisX2D.Title>
                        </dxc:AxisX2D>
                    </dxc:XYDiagram2D.AxisX>

                    <dxc:XYDiagram2D.AxisY>
                        <dxc:AxisY2D>
                            <dxc:AxisY2D.Title>
                                <dxc:AxisTitle Content="Frequency"/>
                            </dxc:AxisY2D.Title>
                        </dxc:AxisY2D>
                    </dxc:XYDiagram2D.AxisY>

                    <dxc:BarSideBySideSeries2D DisplayName="Histogram" 
                                              DataSource="{Binding HistogramData}" 
                                              ArgumentDataMember="Range"
                                              ValueDataMember="Frequency">
                    </dxc:BarSideBySideSeries2D>
                </dxc:XYDiagram2D>
            </dxc:ChartControl>
        </Grid>
    </Grid>
</Window>